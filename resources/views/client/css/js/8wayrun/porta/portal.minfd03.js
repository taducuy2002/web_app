var EWRporta=window.EWRporta||{};
!function(b,h,q){EWRporta.Upload=XF.Element.newHandler({$upload:null,init:function(){$upload=this.$target.find("input[name=upload]");$upload.on("change",$upload,b.proxy(this,"filecheck"))},filecheck:function(){0<XF.config.uploadMaxFilesize&&$upload[0].files[0].size>XF.config.uploadMaxFilesize&&(XF.alert(XF.phrase("file_too_large_to_upload")),$upload.val(""))}});EWRporta.Masonry=XF.Element.newHandler({init:function(){var a=this.$target.masonry({itemSelector:".porta-article-item"});a.imagesLoaded().progress(function(){a.masonry("layout")});
h.twttr&&twttr.ready(XF.proxy(function(d){d.events.bind("loaded",function(f){setTimeout(function(){a.masonry("layout")},1E3)})},this))}});EWRporta.Infinite=XF.Element.newHandler({init:function(){$grid=this.$target;var a=$grid.infiniteScroll({outlayer:$grid.data("masonry"),button:".porta-article-button",append:".porta-article-item",hideNav:".porta-article-pager",path:".porta-article-pager .pageNav-jump--next",status:".porta-article-status",history:$grid.data("history")?"replace":!1});a.on("last.infiniteScroll",
function(){b(".porta-article-status").hide();b(".porta-article-loader").hide()});if($grid.data("click"))if($grid.data("after"))a.on("load.infiniteScroll",function f(){a.data("infiniteScroll").loadCount==$grid.data("after")&&(b(".porta-article-loader").show(),a.infiniteScroll("option",{loadOnScroll:!1}),a.off("load.infiniteScroll",f))});else b(".porta-article-loader").show(),a.infiniteScroll("option",{loadOnScroll:!1})}});EWRporta.Features=XF.Element.newHandler({init:function(){var a=this.$target,
d=[],f=b.Deferred();a.data("relocate")&&a.detach().insertBefore(a.data("relocate"));b.getScript("https://www.youtube.com/player_api");h.onYouTubeIframeAPIReady=function(){f.resolve(h.YT)};f.done(function(){a.find(".porta-features-media").each(function(){var e=b(this).data("slide"),g="youTube"+e,c=a.find(".feature-"+e);c.addClass("has-media");d[g]=new YT.Player(g,{videoId:b(this).data("media"),width:"100%",height:"100%",playerVars:{playlist:b(this).data("media"),enablejsapi:1,autoplay:0,controls:0,
showinfo:0,disablekb:1,modestbranding:1,cc_load_policy:0,iv_load_policy:3,loop:1,rel:0,fs:0},events:{onReady:function(k){k.target.mute();c.find(".bx-unmute").click(function(l){l.preventDefault();k.target.unMute();n.stopAuto();c.find(".bx-unmute").addClass("active");c.find(".bx-mute").removeClass("active")});c.find(".bx-mute").click(function(l){l.preventDefault();k.target.mute();c.find(".bx-mute").addClass("active");c.find(".bx-unmute").removeClass("active")})}}})})});var m=function(){a.find(".bx-progress").stop().css({width:"0%"}).animate({width:"100%"},
{duration:a.data("auto")-a.data("speed")/2,easing:"linear"})},p=function(){a.find(".bx-progress").stop().animate({width:"0%"},{duration:a.data("speed")/2,easing:"linear",complete:function(){a.find(".bx-progress").hide()}})},n=a.find(".porta-features-container").bxSlider({autoHover:!0,autoDelay:4E3,auto:a.data("auto"),mode:a.data("mode"),speed:a.data("speed"),pause:a.data("auto"),pager:a.data("pager")?!0:!1,controls:a.data("controls")?!0:!1,autoControls:a.data("autocontrols")?!0:!1,onAutoChange:function(e){e?
(a.find(".bx-progress").show(),m()):p()},onSlideBefore:function(e,g,c){newPlayer="youTube"+(c+1);newPlayer in d&&d[newPlayer].playVideo();m()},onSlideAfter:function(e,g,c){oldPlayer="youTube"+(g+1);oldPlayer in d&&d[oldPlayer].stopVideo()},onSliderLoad:function(e){setTimeout(function(){newPlayer="youTube"+(e+1);newPlayer in d&&d[newPlayer].playVideo()},4E3)}})}});EWRporta.Showtext=XF.Click.newHandler({eventNameSpace:"EWRportaShowtext",click:function(a){a.preventDefault();b(".porta-block-hide").hide();
b(".porta-block-show").slideDown()}});XF.Element.register("porta-upload","EWRporta.Upload");XF.Element.register("porta-masonry","EWRporta.Masonry");XF.Element.register("porta-infinite","EWRporta.Infinite");XF.Element.register("porta-features","EWRporta.Features");XF.Click.register("porta-showtext","EWRporta.Showtext")}(window.jQuery,window,document);